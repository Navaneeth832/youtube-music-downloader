<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Navan YT Downloader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-950 text-slate-100 min-h-screen">

<div class="max-w-4xl mx-auto p-6 space-y-8">

<h1 class="text-3xl font-bold text-center">
â¬‡ï¸ Navan <span class="text-cyan-400">YT</span> Downloader
</h1>

<!-- MODE -->
<select id="mode" class="w-full bg-slate-900 p-3 rounded-xl">
<option value="single">Single Link</option>
<option value="multi">Multiple Links</option>
<option value="channel">Full Channel</option>
</select>

<!-- URL -->
<input id="url" placeholder="YouTube URL"
class="w-full bg-slate-900 p-4 rounded-xl">

<!-- MULTI -->
<textarea id="multi" placeholder="Paste multiple links (one per line)"
class="hidden w-full bg-slate-900 p-4 rounded-xl h-32"></textarea>

<!-- FILE -->
<input id="file" type="file"
class="w-full bg-slate-900 p-4 rounded-xl">

<!-- OPTIONS -->
<div class="flex gap-4">
<select id="type" class="flex-1 bg-slate-900 p-3 rounded-xl">
<option value="audio">Audio</option>
<option value="video">Video</option>
</select>

<select id="quality" class="flex-1 bg-slate-900 p-3 rounded-xl">
<option value="128k">128k</option>
<option value="192k">192k</option>
<option value="320k">320k</option>
<option value="720">720p</option>
<option value="1080">1080p</option>
</select>
</div>

<button onclick="startDownload()"
class="w-full bg-cyan-500 text-black font-bold py-4 rounded-xl">
ğŸš€ Start Download
</button>

<p id="status" class="text-center text-sm text-slate-400"></p>

<hr class="border-slate-800">

<!-- LIBRARY -->
<div class="flex justify-between items-center">
<h2 class="text-xl font-bold">ğŸ“ Library</h2>
<div class="flex gap-2">
<button onclick="loadLibrary()">ğŸ”„</button>
<a href="/zip" class="bg-slate-800 px-3 py-2 rounded-lg">â¬‡ï¸ ZIP ALL</a>
</div>
</div>

<div id="library" class="space-y-3"></div>

</div>

<script>
const API = "";

document.getElementById("mode").onchange = e => {
document.getElementById("multi").classList.toggle("hidden", e.target.value !== "multi");
};

async function startDownload() {
const mode = modeSelect = document.getElementById("mode").value;
const type = document.getElementById("type").value;
const quality = document.getElementById("quality").value;
const status = document.getElementById("status");

status.innerText = "â³ Starting download...";

if (mode === "multi") {
await fetch("/download", {
method: "POST",
headers: {"Content-Type":"application/json"},
body: JSON.stringify({
mode,
urls: document.getElementById("multi").value.split("\n"),
type, quality
})
});
}
else {
await fetch("/download", {
method: "POST",
headers: {"Content-Type":"application/json"},
body: JSON.stringify({
mode,
url: document.getElementById("url").value,
type, quality
})
});
}

status.innerText = "âœ… Download started (check terminal)";
loadLibrary();
}

async function loadLibrary() {
const res = await fetch("/files");
const files = await res.json();
const lib = document.getElementById("library");
lib.innerHTML = "";

files.forEach(f => {
lib.innerHTML += `
<div class="bg-slate-900 p-4 rounded-xl flex justify-between">
<div>${f.name}<br><span class="text-xs">${f.size}</span></div>
<a href="/files/${f.name}" class="text-cyan-400">â¬‡ï¸</a>
</div>`;
});
}

loadLibrary();
</script>

</body>
</html>
